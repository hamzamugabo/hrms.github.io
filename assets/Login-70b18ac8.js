import{_ as C,D as I,I as L,r as c,M as R,h as T,a as u,b as v,c as h,g as e,k as j,t as P,d as a,i as b,F as B,L as D,q as N,v as A,C as F}from"./index-e8eb3072.js";const l=d=>(N("data-v-05c57c6e"),d=d(),A(),d),M={class:"surface-ground flex align-items-center justify-content-center min-h-screen min-w-screen overflow-hidden"},O={class:"flex flex-column align-items-center justify-content-center"},$=["src"],q={style:{"border-radius":"56px",padding:"0.3rem",background:"linear-gradient(180deg, var(--primary-color) 10%, rgba(33, 150, 243, 0) 30%)"}},E={class:"w-full surface-card py-8 px-5 sm:px-8",style:{"border-radius":"53px"}},H={class:"text-center mb-5"},J={key:0,class:"pi pi-spin pi-spinner",style:{"font-size":"2rem"}},z={class:"text-3xl font-medium mb-3",style:{color:"red"}},G=l(()=>e("span",{class:"text-600 font-medium"},"Sign in to continue",-1)),K=l(()=>e("label",{for:"username",class:"block text-900 text-xl font-medium mb-2"},"Username",-1)),Q=l(()=>e("label",{for:"password1",class:"block text-900 font-medium text-xl mb-2"},"Password",-1)),W=l(()=>e("h6",null,"Pick a password",-1)),X=l(()=>e("p",{class:"mt-2"},"Suggestions",-1)),Y=l(()=>e("ul",{class:"pl-2 ml-2 mt-0",style:{"line-height":"1.5"}},[e("li",null,"At least one lowercase"),e("li",null,"At least one uppercase"),e("li",null,"At least one numeric"),e("li",null,"Minimum 6 characters")],-1)),Z={class:"flex align-items-center justify-content-between mb-5 gap-5"},ee={class:"flex align-items-center"},se=l(()=>e("label",{for:"rememberme1"},"Remember me",-1)),oe=l(()=>e("a",{class:"font-medium no-underline ml-2 text-right cursor-pointer",style:{color:"var(--primary-color)"}},"Forgot password?",-1)),te={__name:"Login",setup(d){const x=I(),{layoutConfig:y}=L(),m=c(""),p=c(""),_=c(!1),g=c(""),n=c(!1),w=R();console.log("base url","https://true-immune-dogfish.ngrok-free.app:443/v1");const k=async()=>{console.log("login initiated"),n.value=!0;const f={username:m.value,password:p.value},o=`${F}/sign-in`;console.log("making request to:",o);try{const t=await fetch(o,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(f)});if(t.ok||(n.value=!1,console.log("response not ok",t)),t.ok){console.log("response ok");const s=await t.json();if((s==null?void 0:s.status)===200){console.log("response status 200");const r=s.data;r.userRole="HR",localStorage.setItem("userInfo",JSON.stringify(r)),w.updateUser(r),x.push("/"),n.value=!1}else console.log("response status not 200",s==null?void 0:s.status)}else{const s=await t.json();g.value=s!=null&&s.message?s==null?void 0:s.message:s==null?void 0:s.error,console.error("Login failed:",s),n.value=!1}}catch(t){console.log("login failed"),console.error("Login error:",t),n.value=!1}console.log("bottom login")},S=T(()=>`/layout/images/${y.darkTheme.value,"image"}.png`);return(f,o)=>{const t=u("InputText"),s=u("Divider"),r=u("Password"),U=u("Checkbox"),V=u("Button");return v(),h(B,null,[e("div",M,[e("div",O,[e("img",{src:S.value,alt:"Sakai logo",class:"mb-5 w-6rem flex-shrink-0"},null,8,$),e("div",q,[e("div",E,[e("div",H,[n.value?(v(),h("i",J)):j("",!0),e("div",z,P(g.value),1),G]),e("div",null,[K,a(t,{id:"username",type:"text",placeholder:"Username",class:"w-full md:w-30rem mb-5",style:{padding:"1rem"},modelValue:m.value,"onUpdate:modelValue":o[0]||(o[0]=i=>m.value=i)},null,8,["modelValue"]),Q,a(r,{id:"password1",modelValue:p.value,"onUpdate:modelValue":o[1]||(o[1]=i=>p.value=i),placeholder:"Password",toggleMask:!0,class:"w-full mb-3",inputClass:"w-full",inputStyle:{padding:"1rem"}},{header:b(()=>[W]),footer:b(()=>[a(s),X,Y]),_:1},8,["modelValue"]),e("div",Z,[e("div",ee,[a(U,{modelValue:_.value,"onUpdate:modelValue":o[2]||(o[2]=i=>_.value=i),id:"rememberme1",binary:"",class:"mr-2"},null,8,["modelValue"]),se]),oe]),a(V,{style:{},onClick:k,label:"Sign In",class:"w-full p-3 text-xl no-hover-button",disabled:n.value},null,8,["disabled"])])])])])]),a(D,{simple:""})],64)}}},ae=C(te,[["__scopeId","data-v-05c57c6e"]]);export{ae as default};
